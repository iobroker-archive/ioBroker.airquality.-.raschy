{
  "version": 3,
  "sources": ["../../src/lib/api_calls.ts"],
  "sourcesContent": ["'use strict';\n\nconst baseUrl: string = 'https://umweltbundesamt.api.proxy.bund.dev/api/air_data/v3/';\n\n// Read in all active measuring stations\nexport async function getStations(): Promise<Stations> {\n\t//url_Stations: 'https://umweltbundesamt.api.proxy.bund.dev/api/air_data/v3/stations/json?lang=de';\n\tconst url: string = baseUrl + 'stations/json?lang=de';\n\tconsole.log(`[getStations] URL=${url}`);\n\tconst _stations: Stations = {};\n\treturn fetch(url, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\taccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\t'User-Agent':\n\t\t\t\t'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36',\n\t\t},\n\t}).then(async (response) => {\n\t\tif (!response.ok) throw new Error('[getStations] failed to retrieve data');\n\t\tconst data: any = await response.json();\n\t\tfor (const key in data.data) {\n\t\t\tconst stationId = data.data[key][0];\n\t\t\t_stations[stationId] = {\n\t\t\t\tid: data.data[key][0],\n\t\t\t\tcode: data.data[key][1],\n\t\t\t\tcity: data.data[key][3],\n\t\t\t\tstreet: data.data[key][17],\n\t\t\t\tnumber: data.data[key][18],\n\t\t\t\tzipcode: data.data[key][19],\n\t\t\t\tlon: data.data[key][7],\n\t\t\t\tlat: data.data[key][8],\n\t\t\t};\n\t\t}\n\t\t//console.log(_stations);\n\t\treturn _stations;\n\t});\n}\n\n// Read in all components\nexport async function getComponents(): Promise<Components> {\n\t//url_Components: 'https://umweltbundesamt.api.proxy.bund.dev/api/air_data/v3/components/json?lang=de&index=id';\n\tconst url: string = baseUrl + 'components/json?lang=de&index=id';\n\tconsole.log(`[getComponents] URL=${url}`);\n\tconst _components: any = {};\n\treturn fetch(url, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\taccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\t'User-Agent':\n\t\t\t\t'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36',\n\t\t},\n\t}).then(async (response) => {\n\t\tif (!response.ok) throw new Error('[getComponents] failed to retrieve data');\n\t\tconst data: any = await response.json();\n\t\tfor (const key in data) {\n\t\t\tif (!isNaN(parseInt(key))) {\n\t\t\t\t// Measurement types from the numerical lists\n\t\t\t\t_components[key] = { name: data[key][1], unit: data[key][3], desc: data[key][4] };\n\t\t\t}\n\t\t}\n\t\t//console.log(_components);\n\t\treturn _components;\n\t});\n}\n\n// Read in all measurements\nexport async function getMeasurements(stationCode: string): Promise<any> {\n\t//url_Measurements: 'https://umweltbundesamt.api.proxy.bund.dev/api/air_data/v3/airquality/json?date_from=2024-09-11&time_from=14&date_to=2024-09-11&time_to=14&station=DENW430&lang=de'\n\tconst urlSpec: string = 'airquality/json?';\n\tconst urlStation: string = await prepareQueryParameters(stationCode);\n\tconst url = [baseUrl, urlSpec, urlStation].join('');\n\tconsole.log(`[getMeasurements] URL=${url}`);\n\tlet _measurements: any = {};\n\treturn fetch(url, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\taccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\t'User-Agent':\n\t\t\t\t'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36',\n\t\t},\n\t}).then(async (response) => {\n\t\tif (!response.ok) throw new Error('[getMeasurements] failed to retrieve data');\n\t\tconst data: any = await response.json();\n\t\t_measurements = data.data;\n\t\treturn _measurements;\n\t});\n}\n//\n/**\n * prepareQueryParameters\n * @param {string} stationCode\n * @returns {string} preparedQueryParameter\n */\nasync function prepareQueryParameters(stationCode: string): Promise<string> {\n\tconst parameters = [];\n\tconst workDate = getDateUTC();\n\tconsole.log(`WorkDate:(1) ${workDate}`);\n\tconst _hour = workDate.getHours();\n\tconst _hourFrom = _hour < 1 ? 24 : _hour;\n\tconsole.log(`hourFrom:(2) ${_hourFrom}`);\n\t//const _hourFrom1 = _hourFrom - 1;\n\t//const _hourTo = _hourFrom + 1;\n\t//\n\tconst dateFrom = 'date_from=' + formatDate(workDate);\n\t//console.log(`dateFrom:(3) ${dateFrom}`);\n\tparameters.push(dateFrom);\n\t//\n\tconst timeFrom = 'time_from=' + String(_hourFrom);\n\t//console.log(`timeFrom:(4) ${timeFrom}`);\n\tparameters.push(timeFrom);\n\t//\n\tconst dateTo = 'date_to=' + formatDate(workDate);\n\t//console.log(`dateTo:(6) ${dateTo}`);\n\tparameters.push(dateTo);\n\t//\n\tconst timeTo = 'time_to=' + String(_hourFrom); //_hourTo\n\t//console.log(`timeTo:(7) ${timeTo}`);\n\tparameters.push(timeTo);\n\t//\n\tparameters.push('station=' + stationCode);\n\t//console.log(`station:(8) ${stationCode}`);\n\tparameters.push('lang=de');\n\t//\n\tconst preparedQueryParameter = parameters.join('&');\n\tconsole.log(`Parameter: ${preparedQueryParameter}`);\n\treturn preparedQueryParameter;\n}\n//\n/**\n * getDateUTC\n * @returns {Date} aktual date in UTC\n */\nfunction getDateUTC(): Date {\n\tconst d = new Date();\n\treturn new Date(\n\t\td.getUTCFullYear(),\n\t\td.getUTCMonth(),\n\t\td.getUTCDate(),\n\t\td.getUTCHours(),\n\t\td.getUTCMinutes(),\n\t\td.getUTCSeconds(),\n\t);\n}\n/**\n * formatDate\n * @param {Date} d Input Date\n * @returns {string} foratted data-string\n */\nfunction formatDate(d: Date): string {\n\tconst year = d.getFullYear();\n\tconst month = (d.getMonth() + 1).toString().padStart(2, '0');\n\tconst day = d.getDate().toString().padStart(2, '0');\n\treturn `${year}-${month}-${day}`;\n}\n"],
  "mappings": "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",
  "names": []
}
