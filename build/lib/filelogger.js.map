{
  "version": 3,
  "sources": ["../../src/lib/filelogger.ts"],
  "sourcesContent": ["//  ======  File Logging   ======\n// writeLog( fileHandle, \"Text\" );\n// fileHandle = { path: './logs/airquality', file: 'logs.txt' };\n\nimport { promises as fs } from 'fs';\n//\ninterface Logger {\n\tpath: string;\n\tfile: string;\n}\n//\nexport async function writeLog(fileObj: Logger, logEntry: string): Promise<void> {\n\t// Get the current date and time\n\tconst now = new Date();\n\tconst dateTime = now.toLocaleString('fr-CH'); // best format for log-entrys\n\t//\n\tif (!fileObj.path.endsWith('/')) {\n\t\tfileObj.path += '/';\n\t\tconsole.log(`\"/\" wurde an ${fileObj.path} angef\u00FCgt.`);\n\t}\n\t//\n\tconst dynFilename: string = createDynfilename(fileObj);\n\tconsole.log(`DynFilename: ${dynFilename}`);\n\tconst newFilePath = [fileObj.path, dynFilename].join('');\n\tconsole.log(`newFilePath: ${newFilePath}`);\n\t// Format the log entry\n\tconst data = `${dateTime}\\t${logEntry}\\n`;\n\tconsole.log(`Logentry: ${data}`);\n\t//appendDataToFile(fileObj, data);\n}\n\nasync function appendDataToFile(fileObj: Logger, data: string): Promise<void> {\n\t//console.log(`(f) checkDirectory ${JSON.stringify(fileObj)}`);\n\tif (!fileObj.path.endsWith('/')) {\n\t\tfileObj.path += '/';\n\t\t//console.log(`\"/\" wurde an ${fileObj.path} angef\u00FCgt.`);\n\t}\n\t//\n\ttry {\n\t\t// \u00DCberpr\u00FCfen und Verzeichnis erstellen, falls es nicht existiert\n\t\tawait fs.mkdir(fileObj.path, { recursive: true });\n\t\t// Daten an die Datei anh\u00E4ngen\n\t\tconst filename = fileObj.path; //fileObj.file;\n\t\t//console.log(`Filename: ${filename}`);\n\t\tawait fs.appendFile(filename, data);\n\t\tconsole.log(`Daten wurden erfolgreich an die Datei ${filename} angeh\u00E4ngt.`);\n\t} catch (error: any) {\n\t\tif (error.code === 'EACCES') {\n\t\t\tconsole.log('Zugriffsfehler: Sie haben keine Berechtigung zum Anh\u00E4ngen von Daten an die Datei.');\n\t\t} else if (error.code === 'ENOENT') {\n\t\t\tconsole.log('Datei oder Verzeichnis nicht gefunden: ' + error.path);\n\t\t} else if (error.code === 'ENOTDIR') {\n\t\t\tconsole.log('Pfad ist kein Verzeichnis: ' + error.path);\n\t\t} else {\n\t\t\tconsole.log('Ein unbekannter Fehler ist aufgetreten:');\n\t\t}\n\t}\n}\n//__________________________\n// Dynamic filename for logfiles\nfunction createDynfilename(fileObj: Logger): string {\n\tconst f: string[] = fileObj.file.split('.');\n\tconst dynFile = [f[0], '_', logDate(), '.', f[1]].join('');\n\treturn dynFile;\n}\n//\n//__________________________\n// Format date for logfiles yymmdd\nfunction logDate(): string {\n\tconst d = new Date();\n\tconst year = d.getFullYear() - 2000;\n\tconst month = (d.getMonth() + 1).toString().padStart(2, '0');\n\tconst day = d.getDate().toString().padStart(2, '0');\n\treturn `${year}${month}${day}`;\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA,gBAA+B;AAO/B,eAAsB,SAAS,SAAiB,UAAiC;AAEhF,QAAM,MAAM,oBAAI,KAAK;AACrB,QAAM,WAAW,IAAI,eAAe,OAAO;AAE3C,MAAI,CAAC,QAAQ,KAAK,SAAS,GAAG,GAAG;AAChC,YAAQ,QAAQ;AAChB,YAAQ,IAAI,gBAAgB,QAAQ,IAAI,eAAY;AAAA,EACrD;AAEA,QAAM,cAAsB,kBAAkB,OAAO;AACrD,UAAQ,IAAI,gBAAgB,WAAW,EAAE;AACzC,QAAM,cAAc,CAAC,QAAQ,MAAM,WAAW,EAAE,KAAK,EAAE;AACvD,UAAQ,IAAI,gBAAgB,WAAW,EAAE;AAEzC,QAAM,OAAO,GAAG,QAAQ,IAAK,QAAQ;AAAA;AACrC,UAAQ,IAAI,aAAa,IAAI,EAAE;AAEhC;AAEA,eAAe,iBAAiB,SAAiB,MAA6B;AAE7E,MAAI,CAAC,QAAQ,KAAK,SAAS,GAAG,GAAG;AAChC,YAAQ,QAAQ;AAAA,EAEjB;AAEA,MAAI;AAEH,UAAM,UAAAA,SAAG,MAAM,QAAQ,MAAM,EAAE,WAAW,KAAK,CAAC;AAEhD,UAAM,WAAW,QAAQ;AAEzB,UAAM,UAAAA,SAAG,WAAW,UAAU,IAAI;AAClC,YAAQ,IAAI,yCAAyC,QAAQ,gBAAa;AAAA,EAC3E,SAAS,OAAY;AACpB,QAAI,MAAM,SAAS,UAAU;AAC5B,cAAQ,IAAI,sFAAmF;AAAA,IAChG,WAAW,MAAM,SAAS,UAAU;AACnC,cAAQ,IAAI,4CAA4C,MAAM,IAAI;AAAA,IACnE,WAAW,MAAM,SAAS,WAAW;AACpC,cAAQ,IAAI,gCAAgC,MAAM,IAAI;AAAA,IACvD,OAAO;AACN,cAAQ,IAAI,yCAAyC;AAAA,IACtD;AAAA,EACD;AACD;AAGA,SAAS,kBAAkB,SAAyB;AACnD,QAAM,IAAc,QAAQ,KAAK,MAAM,GAAG;AAC1C,QAAM,UAAU,CAAC,EAAE,CAAC,GAAG,KAAK,QAAQ,GAAG,KAAK,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE;AACzD,SAAO;AACR;AAIA,SAAS,UAAkB;AAC1B,QAAM,IAAI,oBAAI,KAAK;AACnB,QAAM,OAAO,EAAE,YAAY,IAAI;AAC/B,QAAM,SAAS,EAAE,SAAS,IAAI,GAAG,SAAS,EAAE,SAAS,GAAG,GAAG;AAC3D,QAAM,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,SAAS,GAAG,GAAG;AAClD,SAAO,GAAG,IAAI,GAAG,KAAK,GAAG,GAAG;AAC7B;",
  "names": ["fs"]
}
