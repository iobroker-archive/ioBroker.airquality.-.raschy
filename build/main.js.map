{
  "version": 3,
  "sources": ["../src/main.ts"],
  "sourcesContent": ["'use strict';\n/*\n * Created with @iobroker/create-adapter v2.6.5\n\tRENEWED:\t2024-12-02\n */\n\n// The adapter-core module gives you access to the core ioBroker functions\n// you need to create an adapter\n// Load your modules here, e.g.:\nimport * as utils from '@iobroker/adapter-core';\nimport { getComponents, getMeasurements, getMeasurementsComp, getStations } from './lib/api_calls';\n\nclass Airquality extends utils.Adapter {\n\tpublic constructor(options: Partial<utils.AdapterOptions> = {}) {\n\t\tsuper({\n\t\t\t...options,\n\t\t\tname: 'airquality',\n\t\t\tuseFormatDate: true,\n\t\t});\n\t\tthis.on('ready', this.onReady.bind(this));\n\t\tthis.on('unload', this.onUnload.bind(this));\n\t}\n\tpublic stationList: Stations = {};\n\tpublic components: Components = {};\n\tpublic numberOfElements: number = 0;\n\n\t/**\n\t * Is called when databases are connected and adapter received configuration.\n\t */\n\tprivate async onReady(): Promise<void> {\n\t\t// Initialize your adapter here\n\n\t\t// The adapters config (in the instance object everything under the attribute \"native\") is\n\t\t// accessible via this.config:\n\t\tthis.log.debug('Latitude: ' + this.latitude);\n\t\tthis.log.debug('Longitude: ' + this.longitude);\n\t\tthis.log.debug('config stations: ' + this.config.stations);\n\t\t//\n\t\tthis.stationList = await getStations();\n\t\t//console.log(this.stationList[931].city); //> 'Lingen'\n\t\t//\n\t\tthis.components = await getComponents();\n\t\t//console.log(this.components[6].desc); //> 'Blei im Feinstaub'\n\t\t//\n\t\tif (this.config.stations.length === 0) {\n\t\t\tthis.log.info('[onReady] No stations specified');\n\t\t\t// if no station is selected in config\n\t\t\tconst home: Home = await this.getLocation();\n\t\t\tif (home.lat > 0) {\n\t\t\t\tconst nearestStationIdx: number = await this.findNearestStation(home, this.stationList);\n\t\t\t\tthis.log.info(`[onReady] nearestStationIdx: ${nearestStationIdx}`);\n\t\t\t\tawait this.writeStationToConfig(this.stationList[nearestStationIdx].code);\n\t\t\t}\n\t\t\t//\n\t\t} else {\n\t\t\t// start with delay\n\t\t\tthis.log.info('[onReady] may be loop');\n\t\t\tawait this.delay(Math.floor(Math.random() * 5000));\n\t\t\tconst selectedStations = this.config.stations;\n\t\t\tthis.log.info('[onReady] selectedStations');\n\t\t\t//\n\t\t\ttry {\n\t\t\t\tfor (const station of selectedStations) {\n\t\t\t\t\tthis.log.debug(`[onReady] fetches Data from : ${station}`);\n\t\t\t\t\tawait this.parseData(await getMeasurements(station));\n\t\t\t\t\tawait this.parseDataSingle(await getMeasurementsComp(station, 2));\n\t\t\t\t}\n\t\t\t\t//\n\t\t\t\tawait this.setState('info.lastUpdate', { val: Date.now(), ack: true });\n\t\t\t} catch (error: unknown) {\n\t\t\t\tthis.setState('info.connection', { val: false, ack: true });\n\t\t\t\tif (error instanceof Error) {\n\t\t\t\t\tthis.log.error('[loop] Error: ' + error.message);\n\t\t\t\t} else {\n\t\t\t\t\tthis.log.error('[loop] Unknown error: ' + error);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Persist the measurements\n\t * @param {string} station\n\t * @param {string} sensor\n\t * @param {string} description\n\t * @param {number} value\n\t * @param {string} unit\n\t * @param {string} role\n\t */\n\tasync persistData(\n\t\tstation: string,\n\t\tsensor: string,\n\t\tdescription: string,\n\t\tvalue: number | string,\n\t\tunit: string,\n\t\trole: string,\n\t): Promise<void> {\n\t\tconst dp_Sensor = this.removeInvalidCharacters(station) + '.' + this.removeInvalidCharacters(sensor);\n\t\tthis.log.silly(\n\t\t\t`[persistData] Station \"${station}\"  Sensor \"${sensor}\"  Desc \"${description}\" with value: \"${value}\" and unit \"${unit}\" as role \"${role}`,\n\t\t);\n\t\t//\n\t\tif (isNumber(value)) {\n\t\t\t//value = parseFloat(value);\n\t\t\tawait this.setObjectNotExistsAsync(dp_Sensor, {\n\t\t\t\ttype: 'state',\n\t\t\t\tcommon: {\n\t\t\t\t\tname: description,\n\t\t\t\t\ttype: 'number',\n\t\t\t\t\trole: role,\n\t\t\t\t\tunit: unit,\n\t\t\t\t\tread: true,\n\t\t\t\t\twrite: false,\n\t\t\t\t},\n\t\t\t\tnative: {},\n\t\t\t});\n\t\t} else {\n\t\t\t// or <string>\n\t\t\tawait this.setObjectNotExistsAsync(dp_Sensor, {\n\t\t\t\ttype: 'state',\n\t\t\t\tcommon: {\n\t\t\t\t\tname: description,\n\t\t\t\t\ttype: 'string',\n\t\t\t\t\trole: role,\n\t\t\t\t\tunit: unit,\n\t\t\t\t\tread: true,\n\t\t\t\t\twrite: false,\n\t\t\t\t},\n\t\t\t\tnative: {},\n\t\t\t});\n\t\t}\n\t\t//\n\t\tawait this.setState(dp_Sensor, { val: value, ack: true, q: 0x00 });\n\t\t//\n\t\tfunction isNumber(n: any): boolean {\n\t\t\treturn !isNaN(parseFloat(n)) && !isNaN(n - 0);\n\t\t}\n\t}\n\n\t/**\n\t * Retrieves the desired data from the payload and prepares data for storage\n\t * @param {*} payload Object from Response\n\t * @returns\n\t */\n\tasync parseDataSingle(payload: any): Promise<any> {\n\t\tthis.log.debug(`[parseDataSingle] Payload: ${JSON.stringify(payload)}`);\n\t\tif (Object.keys(payload).length === 0) {\n\t\t\t//this.log.warn('No data received');\n\t\t\treturn;\n\t\t}\n\t\t//\n\t\tconst localDate = new Date();\n\t\tconst summerOffset = localDate.getTimezoneOffset() / 60;\n\t\t//\n\t\tconst stationId: number = parseInt(Object.keys(payload)[0]);\n\t\tawait this.createObject(\n\t\t\tthis.stationList[stationId].code,\n\t\t\tthis.stationList[stationId].city,\n\t\t\tthis.stationList[stationId].street,\n\t\t);\n\t\t//\n\t\tconst innerObject = payload[stationId];\n\t\tconst dateTimeStart = Object.keys(innerObject)[0];\n\t\tconst dateTimeEnd: string = innerObject[dateTimeStart][3];\n\t\tconsole.log(`dateTimeEnd: ${dateTimeEnd}`);\n\t\tconst timeEndAdjusted: string = this.correctHour(dateTimeEnd, summerOffset * -1 - 1);\n\t\t//\n\t\tconst innerData = innerObject[dateTimeStart];\n\t\t//\n\t\tconsole.log(innerData);\n\t\tconst typeMeasurement = innerData[0];\n\t\tawait this.persistData(\n\t\t\tthis.stationList[stationId].code,\n\t\t\tthis.components[typeMeasurement].name,\n\t\t\tthis.components[typeMeasurement].desc,\n\t\t\tinnerData[2], // Value\n\t\t\tthis.components[typeMeasurement].unit,\n\t\t\t'state',\n\t\t);\n\t\tthis.numberOfElements++;\n\t\tif (this.numberOfElements > 0) {\n\t\t\tthis.persistData(\n\t\t\t\tthis.stationList[stationId].code,\n\t\t\t\t'Letzte Messung',\n\t\t\t\t'Zeitspanne der letzten Messung',\n\t\t\t\ttimeEndAdjusted,\n\t\t\t\t'',\n\t\t\t\t'string',\n\t\t\t);\n\t\t\tthis.persistData(\n\t\t\t\tthis.stationList[stationId].code,\n\t\t\t\t'Anzahl Messtypen',\n\t\t\t\t'Zahl der zuletzt gemessenen Typen',\n\t\t\t\tthis.numberOfElements,\n\t\t\t\t'',\n\t\t\t\t'number',\n\t\t\t);\n\t\t}\n\t\t//}\n\t\tthis.log.debug(`[parseDataComp] Measured values from ${this.numberOfElements} sensors determined`);\n\t}\n\n\t//\n\t/**\n\t * Retrieves the desired data from the payload and prepares data for storage\n\t * @param {*} payload Object from Response\n\t * @returns\n\t */\n\tasync parseData(payload: any): Promise<any> {\n\t\tthis.log.debug(`[parseData] Payload: ${JSON.stringify(payload)}`);\n\t\tif (Object.keys(payload).length === 0) {\n\t\t\tthis.log.warn('No data received');\n\t\t\treturn;\n\t\t}\n\t\t//\n\t\tconst localDate = new Date();\n\t\tconst summerOffset = localDate.getTimezoneOffset() / 60;\n\t\t//\n\t\tconst stationId: number = parseInt(Object.keys(payload)[0]);\n\t\tawait this.createObject(\n\t\t\tthis.stationList[stationId].code,\n\t\t\tthis.stationList[stationId].city,\n\t\t\tthis.stationList[stationId].street,\n\t\t);\n\t\t//\n\t\tconst innerObject = payload[stationId];\n\t\tconst dateTimeStart = Object.keys(innerObject)[0];\n\t\tconst dateTimeEnd: string = innerObject[dateTimeStart][0];\n\t\tconst timeEndAdjusted: string = this.correctHour(dateTimeEnd, summerOffset * -1 - 1);\n\t\t//\n\t\tlet innerData;\n\t\tthis.numberOfElements = 0;\n\t\tfor (const element in innerObject) {\n\t\t\tinnerData = innerObject[element];\n\n\t\t\tfor (const element in innerData) {\n\t\t\t\tif (Array.isArray(innerData[element])) {\n\t\t\t\t\tthis.numberOfElements++;\n\t\t\t\t\tconst typeMeasurement = innerData[element][0];\n\t\t\t\t\tawait this.persistData(\n\t\t\t\t\t\tthis.stationList[stationId].code,\n\t\t\t\t\t\tthis.components[typeMeasurement].name,\n\t\t\t\t\t\tthis.components[typeMeasurement].desc,\n\t\t\t\t\t\tinnerData[element][1], // Value\n\t\t\t\t\t\tthis.components[typeMeasurement].unit,\n\t\t\t\t\t\t'state',\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.numberOfElements > 0) {\n\t\t\tthis.persistData(\n\t\t\t\tthis.stationList[stationId].code,\n\t\t\t\t'Letzte Messung',\n\t\t\t\t'Zeitspanne der letzten Messung',\n\t\t\t\ttimeEndAdjusted,\n\t\t\t\t'',\n\t\t\t\t'string',\n\t\t\t);\n\t\t\tthis.persistData(\n\t\t\t\tthis.stationList[stationId].code,\n\t\t\t\t'Anzahl Messtypen',\n\t\t\t\t'Zahl der zuletzt gemessenen Typen',\n\t\t\t\tthis.numberOfElements,\n\t\t\t\t'',\n\t\t\t\t'number',\n\t\t\t);\n\t\t}\n\t\tthis.log.debug(`[parseData] Measured values from ${this.numberOfElements} sensors determined`);\n\t}\n\t//\n\t/**\n\t * Checks if station in config available\n\t * @returns selectedStations\n\t */\n\tasync checkStationInput(): Promise<any> {\n\t\tconst selectedStations = this.config.stations;\n\t\tconsole.log('Selected Stations: ' + selectedStations);\n\t\tconsole.log(Array.isArray(selectedStations));\n\t\treturn selectedStations;\n\t}\n\t//\n\t/**\n\t * Use the specified coordinates from the configuration\n\t * @returns {object} Koordinates(lat, lon)\n\t */\n\tasync getLocation(): Promise<any> {\n\t\tthis.log.debug('[getLocation] try to use the location from the system configuration');\n\t\tif (this.latitude == undefined || this.latitude == 0 || this.longitude == undefined || this.longitude == 0) {\n\t\t\tthis.log.warn(\n\t\t\t\t'longitude/latitude not set in system-config - please check instance configuration of \"System settings\"',\n\t\t\t);\n\t\t\treturn { lat: -1, lon: -1 };\n\t\t} else {\n\t\t\tthis.log.debug(`[getLocation] using Latitude: ${this.latitude} and Longitude: ${this.longitude}`);\n\t\t\treturn { lat: this.latitude, lon: this.longitude };\n\t\t}\n\t}\n\t//\n\t/**\n\t * search for the nearest station using coordinates\n\t * @param {object} localHome\n\t * @param {object} coordinates\n\t * @returns {number} stationId\n\t */\n\tasync findNearestStation(localHome: Home, coordinates: Stations): Promise<number> {\n\t\tlet minDistance: number = Number.MAX_VALUE;\n\t\tlet nearestStation: number = 0;\n\t\tthis.log.debug(`[findNearestStation]: Latitude: ${localHome.lat} Longitude: ${localHome.lon}`);\n\t\t//\n\t\tfor (const key of Object.keys(coordinates)) {\n\t\t\tconst distance = this.getDistanceFromLatLonInKm(\n\t\t\t\tlocalHome.lat,\n\t\t\t\tlocalHome.lon,\n\t\t\t\tparseFloat(coordinates[key].lat),\n\t\t\t\tparseFloat(coordinates[key].lon),\n\t\t\t);\n\t\t\tthis.log.silly(`Distance: ${key} ${distance}`);\n\t\t\tif (distance < minDistance) {\n\t\t\t\tminDistance = distance;\n\t\t\t\tnearestStation = parseInt(key);\n\t\t\t}\n\t\t}\n\t\tthis.log.debug(`[findNearestStation]: >>> Station ID: ${nearestStation}`);\n\t\treturn nearestStation;\n\t}\n\t//\n\t/**\n\t * write code of Station in UI-config\n\t * @param {string} localStation code of mesurement station\n\t */\n\tasync writeStationToConfig(localStation: string): Promise<void> {\n\t\tconst _station: Array<string> = [];\n\t\tthis.getForeignObject('system.adapter.' + this.namespace, (err, obj) => {\n\t\t\tif (err) {\n\t\t\t\tthis.log.error(`[writeStationToConfig] ${err}`);\n\t\t\t} else {\n\t\t\t\tif (obj) {\n\t\t\t\t\t_station.push(localStation); // must be an array\n\t\t\t\t\tobj.native.stations = _station; // modify object\n\t\t\t\t\tthis.setForeignObject(obj._id, obj, (err) => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\tthis.log.error(`[writeStationToConfig] Error when writing in config: ${err}`);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.log.debug(`[writeStationToConfig] New Station in config: ${localStation}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\t//\n\t/**\n\t * Create a folder f\u00FCr station\n\t * @param {string} station\n\t * @param {string} description\n\t * @param {string} location\n\t */\n\tasync createObject(station: string, description: string, location: string): Promise<void> {\n\t\tconst dp_Folder = this.removeInvalidCharacters(station);\n\t\tif (await this.objectExists(dp_Folder)) return;\n\t\t//\n\t\tawait this.setObjectNotExists(dp_Folder, {\n\t\t\ttype: 'folder',\n\t\t\tcommon: {\n\t\t\t\tname: {\n\t\t\t\t\ten: 'Measurements from station',\n\t\t\t\t\tde: 'Messungen von Station',\n\t\t\t\t\tru: '\u0418\u0437\u043C\u0435\u0440\u0435\u043D\u0438\u044F \u043D\u0430 \u0441\u0442\u0430\u043D\u0446\u0438\u0438',\n\t\t\t\t\tpt: 'Medi\u00E7\u00F5es da esta\u00E7\u00E3o',\n\t\t\t\t\tnl: 'Metingen vanaf het station',\n\t\t\t\t\tfr: 'Mesures de la station',\n\t\t\t\t\tit: 'Misure dalla stazione',\n\t\t\t\t\tes: 'Medidas desde la estaci\u00F3n',\n\t\t\t\t\tpl: 'Pomiary ze stacji',\n\t\t\t\t\tuk: '\u0412\u0438\u043C\u0456\u0440\u044E\u0432\u0430\u043D\u043D\u044F \u0437 \u0441\u0442\u0430\u043D\u0446\u0456\u0457',\n\t\t\t\t\t'zh-cn': '\u4ECE\u8F66\u7AD9\u6D4B\u91CF',\n\t\t\t\t},\n\t\t\t\tdesc: description + '> ' + location,\n\t\t\t\trole: 'info',\n\t\t\t},\n\t\t\tnative: {},\n\t\t});\n\t\tthis.log.debug(`[createObject] Station \"${station}\" City \"${description}\"`);\n\t}\n\n\t/**\n\t * calculates the distance between two coordinates using the Haversine formula\n\t * @param {number} lat1 Latitude of the place of residence\n\t * @param {number} lon1 Longitude of the place of residence\n\t * @param {number} lat2 Latitude of the station\n\t * @param {number} lon2 Longitude of the station\n\t * @returns {number} Distance to the station\n\t */\n\tgetDistanceFromLatLonInKm(lat1: number, lon1: number, lat2: number, lon2: number): number {\n\t\tconst R = 6371; // Radius of the earth in kilometres\n\t\tconst dLat = deg2rad(lat2 - lat1);\n\t\tconst dLon = deg2rad(lon2 - lon1);\n\t\tconst a =\n\t\t\tMath.sin(dLat / 2) * Math.sin(dLat / 2) +\n\t\t\tMath.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n\t\tconst c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\t\tconst d = R * c; // Distance in km\n\t\treturn d;\n\t\t// Convert to radians\n\t\tfunction deg2rad(deg: number): number {\n\t\t\treturn deg * (Math.PI / 180);\n\t\t}\n\t}\n\n\t/**\n\t * removes illegal characters\n\t * @param inputString Designated name for an object/data point\n\t * @returns Cleaned name for an object/data point\n\t */\n\tremoveInvalidCharacters(inputString: string): string {\n\t\tconst regexPattern = '[^a-zA-Z0-9]+';\n\t\tconst regex = new RegExp(regexPattern, 'gu');\n\t\treturn inputString.replace(regex, '_');\n\t}\n\n\t/**\n\t * correct datestring from datestring by adding x hours\n\t * @param {string} s\n\t * @param {number} offset\n\t * @returns {string}\n\t */\n\tcorrectHour(s: string, offset: number): string {\n\t\tconst dateString = s.split(' ')[0].split('-');\n\t\tconst sDate = dateString[2] + '.' + dateString[1] + '.' + dateString[0];\n\t\t//\n\t\tconst timeString = s.split(' ')[1].split(':');\n\t\tconst hour = parseInt(timeString[0]) + offset; //Korrektur\n\t\tconst sHour = hour.toString().padStart(2, '0');\n\t\tconst sTime = sHour + ':' + timeString[1];\n\t\treturn `${sDate} ${sTime}`;\n\t}\n\t/**\n\t * Is called when adapter shuts down - callback has to be called under any circumstances!\n\t */\n\tprivate onUnload(callback: () => void): void {\n\t\ttry {\n\t\t\t// Here you must clear all timeouts or intervals that may still be active\n\t\t\tcallback();\n\t\t} catch (e) {\n\t\t\tthis.log.debug(`[onUnload] e ${e}`); //eslint no-unused-vars\n\t\t\tcallback();\n\t\t}\n\t}\n}\n\nif (require.main !== module) {\n\t// Export the constructor in compact mode\n\tmodule.exports = (options: Partial<utils.AdapterOptions> | undefined) => new Airquality(options);\n} else {\n\t// otherwise start the instance directly\n\t(() => new Airquality())();\n}\n"],
  "mappings": "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",
  "names": ["element", "err"]
}
